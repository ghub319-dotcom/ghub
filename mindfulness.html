<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mindfulness</title>
<style>
  body{font-family:sans-serif;margin:0;text-align:center}
  nav{padding:10px;background:#0a680d;display:flex;gap:10px}
  .brand{font-weight:bold;margin-right:auto}
  .breath{width:150px;height:150px;margin:20px auto;border-radius:50%;
          display:flex;align-items:center;justify-content:center;
          background:lightblue;transition:transform 4s ease-in-out}
  .inhale{transform:scale(1.3);background:skyblue}
  .exhale{transform:scale(0.8);background:lightgreen}
</style>
</head>
<body>
<nav><div class="brand">GreenBite🍃</div><a href="index.html">Home🏠</a></nav>
<main>
  <h1>Mindfulness</h1>
  <div class="card">
    <div id="breath" class="breath">Breathe</div>
    <p id="breathText"></p>
    <button onclick="startBreathing()">Start Breath🌬</button>
    <button onclick="stopBreathing()">Stop</button>
    <hr>
    <h3>Timer</h3>
    <input id="minInput" type="number" value="1" min="1"> min
    <button onclick="startTimer()">Start Session</button>
    <p id="sessionMsg"></p>
    <button id="soundToggle" onclick="toggleSound()">Toggle Ambient</button>
  </div>
</main>
<script>
const breathEl=document.getElementById("breath"),
      txt=document.getElementById("breathText"),
      msg=document.getElementById("sessionMsg"),
      btn=document.getElementById("soundToggle"),
      audio=new Audio("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3");
      
audio.loop=true;audio.volume=0.2;
let idx=0,timer,bSound=false,steps=[
  {t:4000,p:"Inhale",c:"inhale"},
  {t:2000,p:"Hold",c:""},
  {t:4000,p:"Exhale",c:"exhale"},
  {t:2000,p:"Hold",c:""}
];

function cycle(){let s=steps[idx];breathEl.className="breath "+s.c;txt.textContent=s.p;idx=(idx+1)%steps.length;timer=setTimeout(cycle,s.t);}
function startBreathing(){cycle();}
function stopBreathing(){clearTimeout(timer);idx=0;breathEl.className="breath";txt.textContent="";}
function startTimer(){
  let secs=(+document.getElementById("minInput").value||1)*60;
  msg.textContent="Session running...";
  const id=setInterval(()=>{if(--secs<=0){clearInterval(id);msg.textContent="Session complete!";track();}},1000);
}
function toggleSound(){bSound?audio.pause():audio.play();bSound=!bSound;btn.textContent=bSound?"Stop Ambient":"Toggle Ambient";}
function track(){let k="green_sessions",a=JSON.parse(localStorage[k]||"[]");a.push({when:new Date().toISOString()});localStorage[k]=JSON.stringify(a);}
</script>
</body>
</html>
